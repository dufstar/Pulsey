<!DOCTYPE html>
<html>
<head>
  <title>Pulsy Test</title>
  <style>
    .user-anchor {
      background: #f67b45;
      width: 300px;
      height: 100px;
      position: relative;
      margin: 50px;
      border-radius: 4px;
      display: inline-block;
    }
    .wrapper {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      padding: 50px;
    }
    .spinner {
      background-color: #333;

      border-radius: 100%;
      -webkit-animation: sk-scaleout 1.0s infinite ease-in-out;
      animation: sk-scaleout 1.0s infinite ease-in-out;
    }

    @-webkit-keyframes sk-scaleout {
      0% { -webkit-transform: translate(-50%,-50%) scale(0) }
      100% {
        -webkit-transform: translate(-50%,-50%) scale(1.0);
        opacity: 0;
      }
    }

    @keyframes sk-scaleout {
      0% {
        -webkit-transform: translate(-50%,-50%) scale(0);
        transform: translate(-50%,-50%) scale(0);
      } 100% {
        -webkit-transform: translate(-50%,-50%) scale(1.0);
        transform: translate(-50%,-50%) scale(1.0);
        opacity: 0;
      }
    }
  </style>
</head>

<body style="background: #333;">
  <div class="wrapper">
    <div class="anchor user-anchor">
    </div>
    <div class="anchor user-anchor">
    </div>
    <div class="anchor user-anchor">
    </div>
    <div class="anchor user-anchor">
    </div>
  </div>
  <div id="pulsy-tour"></div>

  <script src="../bower_components/react/JSXTransformer.js"></script>
  <script src="../bower_components/react/react.js"></script>

//   <script type="text/jsx">
//
//   var style = {
//     pulsyDot: {
//       position: 'absolute',
//       display: 'inline-block',
//       width: '20px',
//       height: '20px',
//       background: 'rgba(255,255,255,0.4)',
//       borderRadius: '100%',
//       left: '50%',
//       top: '50%',
//       transform: 'translate(-50%,-50%)',
//       cursor: 'pointer',
//       zIndex: '9998',
//     },
//     pulsyFront: {
//       position: 'absolute',
//       display: 'inline-block',
//       width: '50px',
//       height: '50px',
//       background: 'rgba(255,255,255,0.7)',
//       borderRadius: '100%',
//       left: '50%',
//       top: '50%',
//       transform: 'translate(-50%,-50%)',
//       cursor: 'pointer',
//       zIndex: '9999',
//     },
//     pulsyTooltip: {
//       minWidth: '200px',
//       minHeight: '35px',
//       background: '#eee',
//       position: 'absolute',
//       top: '-75px',
//       left: '50%',
//       transform: 'translate(-50%,0)',
//       padding: '15px',
//       textAlign: 'left',
//     },
//     closeTooltip: {
//       color: '#333',
//       transform: 'translate(-50%, -5%) rotate(-45deg)',
//       position: 'absolute',
//       top: '0',
//       right: '0',
//       fontSize: '20px',
//       fontFamily: 'sans-serif',
//       fontWeight: '300',
//       cursor: 'pointer',
//     }
//   }
//
//   var anchorSet = document.getElementsByClassName('anchor');
//   var setLength = anchorSet.length;
//   var dotTooltips = [];
//   for (i=0;i<setLength;i++) {
//     dotTooltips[i] = {
//       dotNumber: i,
//       tooltipName: 'Tooltip Name #' + i,
//       tooltipNote: 'Some tooltip note of great significance and utility.',
//       dotClicked: false,
//     };
//   }
// // var PulsyTooltip = React.createClass({ //
//
// // anchorSet[1].parentElement.getBoundingClientRect().right
//
//   ////////////////////
//   // PULSYTOOLTIP
//   var PulsyTooltip = React.createClass({
//     render: function() {
//       return (
//         <div style={style.pulsyTooltip}>
//           {this.props.tooltipMsg}
//           <div style={style.closeTooltip} onClick={this.props.removeTooltip}> + </div>
//         </div>
//       );
//     }
//   });
//
//   ////////////////////
//   // PULSYDOT
//   var PulsyDot = React.createClass({
//     getInitialState: function() {
//       return {
//         showTooltip: false,
//         dotClicked: dotTooltips[this.props.anchorNumber].dotClicked,
//       };
//     },
//     dotClick: function() {
//       this.setState({
//         showTooltip: !this.state.showTooltip,
//         dotClicked: !this.state.dotClicked,
//       });
//       dotTooltips[this.props.anchorNumber].dotClicked = !this.state.dotClicked;
//     },
//     tooltipClick: function() {
//       this.setState({
//         showTooltip: !this.state.showTooltip
//       });
//     },
//     render: function() {
//       var dot = !this.state.dotClicked ?
//         <div style={style.pulsyDot} onClick={this.dotClick}>
//           <div style={style.pulsyFront} className="spinner"></div>
//         </div> :
//         null;
//       var tooltip = this.state.showTooltip ?
//           <PulsyTooltip tooltipMsg = {
//               dotTooltips[this.props.anchorNumber].tooltipNote
//             } removeTooltip={this.tooltipClick} /> :
//         null;
//       return (
//         <div>
//           {dot}
//           {tooltip}
//         </div>
//       );
//     }
//   });
//
//   ////////////////////
//   // RENDER
//   for (i=0;i<setLength;i++) {
//     React.render(<PulsyDot anchorNumber = {i}/>, anchorSet[i]);
//   }
//
//   </script>



  <script type="text/jsx">

  // CREATE ARRAY OF PULSY ANCHORS
  var pulsyAnchors = document.getElementsByClassName('anchor');
  var pulsyLength = pulsyAnchors.length;
  var pulsyArray = [];
  for (i=0;i<pulsyAnchors.length;i++) {
    pulsyArray[i] = {
      dotNumber: i,
      tooltipName: 'Tooltip Name #' + i,
      tooltipNote: 'Default tooltip note.',
      dotClicked: false,
      coordinates: pulsyAnchors[i].getBoundingClientRect(),
    };
  }

  var PulsyTooltip = React.createClass({
    render: function() {
      return (
        <div>
          yebo
        </div>
      );
    }
  });

  var PulsyDot = React.createClass({
    render: function() {
      var style = {
        position: 'absolute',
        top: this.props.coordinates.top,
        left: this.props.coordinates.left,
        width: this.props.coordinates.width,
        height: this.props.coordinates.height,
        background: 'blue'
      }
      return (
        <div style={style}>
          {this.props.dotNumber}
          {this.props.coordinates.top}
        </div>
      );
    }
  });

  var PulsyTour = React.createClass({
    render: function() {
      var pulsyLength = this.props.anchors;
      var dots = [];
      for (i=0;i<pulsyLength;i++) {
        dots.push(<PulsyDot dotNumber={i} coordinates={this.props.pulsyArray[i].coordinates} />);
      }
      return (
        <div>
          {dots}
        </div>
      )
    }
  });

  // RENDER ROOT COMPONENT IN DOM
  React.render(<PulsyTour
                  anchors={pulsyLength}
                  pulsyArray={pulsyArray}
                />, document.getElementById('pulsy-tour')
              );

  </script>

</body>
<html>
