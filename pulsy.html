<!DOCTYPE html>
<html>
<head>
  <title>Pulsy Test</title>
  <style>
    .user-anchor {
      background: #f67b45;
      width: 300px;
      height: 100px;
      position: relative;
      margin: 50px auto 150px;
      border-radius: 4px;
    }
    .wrapper {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      padding: 50px;
    }
  </style>
</head>

<body style="background: #333;">
  <div class="wrapper">
    <div class="anchor user-anchor"></div>
    <div class="anchor user-anchor"></div>
    <div class="anchor user-anchor"></div>
  </div>

  <script src="../bower_components/react/JSXTransformer.js"></script>
  <script src="../bower_components/react/react.js"></script>

  <script type="text/jsx">

  var style = {
    pulsyDot: {
      position: 'absolute',
      display: 'inline-block',
      width: '50px',
      height: '50px',
      background: '#4c93ea',
      borderRadius: '100%',
      left: '50%',
      top: '50%',
      transform: 'translate(-50%,-50%)',
      cursor: 'pointer'
    },
    pulsyTooltip: {
      width: '100px',
      height: '40px',
      background: '#eee',
      position: 'absolute',
      top: '-50px',
      left: '50%',
      transform: 'translate(-50%,0)',
      padding: '10px',
      textAlign: 'center'
    }
  }

  var userNotes = {}

  var anchorSet = document.getElementsByClassName('anchor');
  var anchorLength = anchorSet.length;
  for (i=0;i<anchorLength;i++) {
    userNotes[i] = 'default tooltip note ' + i;
  }

  var Tooltip = React.createClass({
    render: function() {
      return (
        <div
        style={style.pulsyTooltip}>
          {this.props.tooltipMsg}
        </div>
      );
    }
  });

  var PulsyDot = React.createClass({
    getInitialState: function() {
      return {
        toggleTooltip: false
      };
    },
    onClick: function() {
      this.setState({toggleTooltip: !this.state.toggleTooltip});
    },
    render: function() {
      return (
        <div
        style={style.pulsyDot}
        onClick={this.onClick}>
          {this.state.toggleTooltip ? <Tooltip tooltipMsg = {userNotes[this.props.anchorNumber]} /> : null}
        </div>
      );
    }
  });

  for (i=0;i<anchorLength;i++) {
    React.render(<PulsyDot anchorNumber = {i}/>, anchorSet[i]);
  }

  </script>
</body>
<html>
